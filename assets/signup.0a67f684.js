import{a as R,b as j,_ as q}from"./NameField.vue_vue_type_script_setup_true_lang.e140212c.js";import{d as z,k as H,l,A as S,B as J,u as Q,q as W,o as c,c as V,b as r,s as C,t as _,e as d,a as I,w as h,T as k,D as f,i as X,E as B,_ as Y}from"./app.780681c6.js";import{b as F}from"./route-block.011d1056.js";import"./InputField.vue_vue_type_script_setup_true_lang.f465c248.js";const Z={flex:"","flex-col":"","h-full":"","justify-center":""},ee={"text-4xl":"","m-3":""},le={"opacity-75":""},oe=X(" \xB7 "),ae={key:0},se=["disabled"],ne={key:1},te=["disabled"],E=z({__name:"signup",setup(ue){H();const u=l(),o=l("INITIAL"),K=l(),N=l("INITIAL"),v=l(""),t=l("INITIAL"),m=l(!1),i=l(!1),p=l(!1),b=l(!1),s=l(!1),O=l(null),x=l(null);function $(){m.value=m.value||o.value=="OK",i.value=i.value||o.value=="OK"&&t.value=="OK"&&!s.value,b.value=o.value=="OK"&&s.value,p.value=o.value=="OK"&&!s.value,s.value&&o.value=="OK"&&t.value=="OK"&&x.value.focus()}function A(){i.value=i.value||o.value=="OK"&&t.value=="OK"&&!s.value,s.value&&o.value=="OK"&&t.value=="OK"&&x.value.focus()}function P(){y.value&&O.value.focus()}const y=S(()=>!s.value&&o.value=="OK"&&N.value=="OK"&&t.value=="OK"),T=S(()=>s.value&&o.value=="OK"&&t.value=="OK");J(u,async(n,e)=>{o.value!="OK"?(console.log("Email not validated yet"),s.value=!1):(console.log("Does user already exist?"),console.log(`Full sea name! ${w.value}`))});const w=S(()=>"~@"+u.value);async function U(){y?(console.log("Create an account!!"),console.log(`Signup2 to the Gun network! ${u.value}:${v.value}`),console.log(`Full sea name! ${w.value}`),s.value?console.log("A user with this name already exists; not creating."):console.log("No, not yet, will try to create")):console.log("Not possible to signup!")}async function D(){console.log("SIGNING IN!");var n=gun.user();console.log(`Full sea name! ${w.value}`),n.auth(u.value,v.value,e=>{e.err?(console.log(e.err),console.log("Connexion unsucessfull")):(console.log("Connexion succeeded"),console.log(e),window.user=e,console.log(n._.sea.epriv),localStorage.setItem("current_epriv",n._.sea.epriv),localStorage.setItem("current_priv",n._.sea.priv),localStorage.setItem("current_epub",n._.sea.epub),localStorage.setItem("current_pub",n._.sea.pub))})}const{t:g}=Q();return W(()=>{}),(n,e)=>{const G=R,L=j,M=q;return c(),V("div",Z,[r("div",ee,[r("p",le,[r("span",{class:C(b.value?"text-5xl":"text-2xl")},_(d(g)("signup.signin")),3),oe,r("span",{class:C(p.value?"text-5xl":"text-2xl")},_(d(g)("signup.signup")),3)])]),I(G,{ref:"emailFocusRef",modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value=a),"field-domain":"signup",onEmailValidationChanged:e[1]||(e[1]=a=>{o.value=a}),onEmailSubmission:$},null,8,["modelValue"]),I(k,null,{default:h(()=>[m.value?(c(),B(L,{key:0,modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=a=>v.value=a),"field-domain":"signup",onPasswordValidationChanged:e[3]||(e[3]=a=>{t.value=a}),onPasswordSubmission:A},null,8,["modelValue"])):f("",!0)]),_:1}),I(k,null,{default:h(()=>[i.value&&p.value?(c(),B(M,{key:0,modelValue:K.value,"onUpdate:modelValue":e[4]||(e[4]=a=>K.value=a),"field-domain":"signup",onNameValidationChanged:e[5]||(e[5]=a=>{N.value=a}),onNameSubmission:P},null,8,["modelValue"])):f("",!0)]),_:1}),i.value&&p.value?(c(),V("div",ae,[r("button",{ref_key:"signupButton",ref:O,btn:"","m-5":"","text-2xl":"",class:"border-rounded-10 bg-#6622aa",disabled:!d(y),onClick:U},_(d(g)("signup.signup-prompt")),9,se)])):f("",!0),m.value&&b.value?(c(),V("div",ne,[r("button",{ref_key:"signinButton",ref:x,btn:"","m-3":"","p-2":"","p-x-4":"","text-lg":"",class:"border-rounded-10 bg-#6622aa",disabled:!d(T),onClick:D},_(d(g)("signup.signin-prompt")),9,te)])):f("",!0)])}}});typeof F=="function"&&F(E);const ve=Y(E,[["__scopeId","data-v-128330a0"]]);export{ve as default};
