import{_ as X}from"./FullscreenModal.vue_vue_type_script_setup_true_lang.bf494504.js";import{d as F,l,A as g,B as I,o as R,c as D,a as m,e as v,k as Y,u as ee,b as i,i as S,t as N,m as K,v as O,F as oe,C as ne,p as le,n as ae,f as ie,_ as se}from"./app.780681c6.js";import{_ as h}from"./InputField.vue_vue_type_script_setup_true_lang.f465c248.js";import{_ as te,a as de,b as ue}from"./NameField.vue_vue_type_script_setup_true_lang.e140212c.js";import{b as E}from"./route-block.011d1056.js";const me={flex:"","justify-center":"","items-center":""},re=F({__name:"RealNameField",props:{fieldDomain:null,modelValue:null},emits:["realNameValidationChanged","realNameSubmission","update:modelValue"],setup(r,{emit:d}){const f=r,n=l(""),p=g(()=>(console.log(n.length),n.value.length>2&&n.value.split(" ").filter(s=>s).length>1?(console.log("Valid realName!"),"OK"):(console.log("Invalid realName! Too short."),"NOK")));return I(p,async(s,a)=>{console.log("Watching..."),console.log(a),console.log(s),d("realNameValidationChanged",s)}),I(n,async(s,a)=>{console.log("Watching realNames..."),d("update:modelValue",s)}),(s,a)=>{const t=h;return R(),D("div",me,[m(t,{"m-1":"","field-name":"realName","field-domain":f.fieldDomain,"field-type":"text","field-icon":"i-carbon-user","field-status":v(p),modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c),onFocusout:a[1]||(a[1]=c=>d("realNameSubmission")),onInputSubmission:a[2]||(a[2]=c=>d("realNameSubmission"))},null,8,["field-domain","field-status","modelValue"])])}}}),fe={flex:"","justify-center":"","items-center":""},ce=F({__name:"IbanField",props:{fieldDomain:null,modelValue:null},emits:["ibanValidationChanged","ibanSubmission","update:modelValue"],setup(r,{emit:d}){const f=r,n=l(""),p=/^[A-Z]{2}(?:[ ]?[0-9]){18,20}$/,s=g(()=>(console.log("validate iban, put it green if ok, red if incorrect"),n.value.match(p)?(console.log("Valid iban address!"),"OK"):(console.log("Invalid iban address!"),"NOK")));return I(s,async(a,t)=>{d("ibanValidationChanged",a)}),I(n,async(a,t)=>{console.log("Watching ibans..."),d("update:modelValue",a)}),(a,t)=>{const c=h;return R(),D("div",fe,[m(c,{"m-1":"","field-name":"iban","field-domain":f.fieldDomain,"field-type":"text","field-size":80,"field-icon":"i-mdi-bank-outline","field-status":v(s),modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=b=>n.value=b),onFocusout:t[1]||(t[1]=b=>d("ibanSubmission")),onInputSubmission:t[2]||(t[2]=b=>d("ibanSubmission"))},null,8,["field-domain","field-status","modelValue"])])}}}),x=r=>(le("data-v-9c0bf050"),r=r(),ae(),r),pe={flex:"","flex-col":"","h-full":"","justify-center":"","items-center":""},ve={flex:"","flex-col":"","justify-center":"","items-center":""},be=x(()=>i("div",{"i-carbon-caret-sort-down":""},null,-1)),ge={flex:"","flex-col":"","justify-center":"","items-center":""},_e=x(()=>i("div",{w40:""},[i("img",{src:"https://avatars.dicebear.com/api/avataaars/alexvdvfsvdvdscsdsvsdcs.svg"})],-1)),Ve=["disabled"],Ne={"flex-col":"","justify-center":""},Ie=x(()=>i("div",{"i-carbon-caret-sort-down":""},null,-1)),Se={"flex-col":"","justify-center":""},xe=["disabled"],ye=x(()=>i("p",{"text-4xl":""},"32",-1)),A=F({__name:"profile",setup(r){const d=ie();Y();const f=l(""),n=l("INITIAL"),p=l(""),s=l("INITIAL"),a=l(""),t=l("INITIAL"),c=l(),b=l("INITIAL"),j=l(""),_=l("INITIAL"),y=l(!0),$=l(!0),C=l(!1),V=l(!1);l(null);const w=l(null);function U(){V.value&&n.value=="OK"&&_.value=="OK"&&w.value.focus()}function B(){V.value&&n.value=="OK"&&_.value=="OK"&&w.value.focus()}g(()=>!V.value&&n.value=="OK"&&b.value=="OK"&&_.value=="OK");const T=g(()=>V.value&&n.value=="OK"&&_.value=="OK"),L=g(()=>s.value=="OK"&&t.value=="OK");I(f,async(u,e)=>{n.value!="OK"?(console.log("Email not validated yet"),V.value=!1):(console.log("Does user already exist?"),console.log(`Full sea name! ${M.value}`))});const M=g(()=>"~@"+f.value);function P(){console.log("Executing refund"),C.value=!0}function W(){console.log("Dismissing Confirmation modal"),C.value=!1,d.push("/")}const{t:k}=ee();return(u,e)=>{const z=te,Z=de,q=ue,G=ce,H=re,J=ne,Q=X;return R(),D(oe,null,[i("div",pe,[i("div",ve,[i("div",{"text-3xl":"","m-2":"","animate-pulse":"","animate-duration-5s":"",onClick:e[0]||(e[0]=o=>$.value=!$.value),flex:"","flex-row":"","justify-center":"",anim:""},[S(N(u.$t("profile.title"))+" ",1),be]),K(i("div",ge,[_e,m(z,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),"field-domain":"signup",onNameValidationChanged:e[2]||(e[2]=o=>{b.value=o}),onNameSubmission:u.nameSubmitted},null,8,["modelValue","onNameSubmission"]),m(Z,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),"field-domain":"signup",onEmailValidationChanged:e[4]||(e[4]=o=>{n.value=o}),onEmailSubmission:U},null,8,["modelValue"]),m(q,{modelValue:j.value,"onUpdate:modelValue":e[5]||(e[5]=o=>j.value=o),"field-domain":"signup",onPasswordValidationChanged:e[6]||(e[6]=o=>{_.value=o}),onPasswordSubmission:B},null,8,["modelValue"]),i("div",null,[i("button",{ref_key:"signinButton",ref:w,btn:"","m-3":"","p-2":"","p-x-4":"","text-lg":"",border:"rounded-20",disabled:!v(T),onClick:e[7]||(e[7]=(...o)=>u.signin&&u.signin(...o))},N(v(k)("profile.save")),9,Ve)])],512),[[O,$.value]])]),i("div",Ne,[i("div",{"text-3xl":"","m-2":"","animate-pulse":"","animate-duration-5s":"",onClick:e[8]||(e[8]=o=>y.value=!y.value),flex:"","flex-row":"","justify-center":"",anim:""},[S(N(u.$t("profile.refund"))+" ",1),Ie]),K(i("div",Se,[m(G,{modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=o=>p.value=o),"field-domain":"profile",onIbanValidationChanged:e[10]||(e[10]=o=>{s.value=o}),onIbanSubmission:u.ibanSubmitted},null,8,["modelValue","onIbanSubmission"]),m(H,{modelValue:a.value,"onUpdate:modelValue":e[11]||(e[11]=o=>a.value=o),"field-domain":"profile",onRealNameValidationChanged:e[12]||(e[12]=o=>{t.value=o}),onRealNameSubmission:u.realNameSubmitted},null,8,["modelValue","onRealNameSubmission"])],512),[[O,y.value]]),i("div",null,[i("button",{ref:"refundButton",btn:"","m-6":"","p-4":"","text-lg":"",class:"border-rounded-10 bg-#6622aa",disabled:!v(L),onClick:P},[S(N(v(k)("profile.refund-first-button"))+" ",1),ye,S(" "+N(u.$t("profile.refund-token-name")),1)],8,xe)])])]),m(J,{redirection:"/",caption:v(k)("profile.back"),"icon-name":"i-carbon:progress-bar-round",side:"right"},null,8,["caption"]),K(m(Q,{onDismissModal:W,modalMessage:u.$t("profile.modal-message"),modalIcon:"i-carbon-checkmark",modalColor:"bg-green"},null,8,["modalMessage"]),[[O,C.value]])],64)}}});typeof E=="function"&&E(A);const Oe=se(A,[["__scopeId","data-v-9c0bf050"]]);export{Oe as default};
