import{_ as Q}from"./FullscreenModal.vue_vue_type_script_setup_true_lang.2c2f6764.js";import{d as F,l,z as g,A as I,o as R,c as D,a as r,e as v,k as X,u as Y,b as i,i as S,t as N,w as K,v as O,F as ee,B as oe,p as ne,m as le,f as ae,_ as ie}from"./app.8dbc5714.js";import{_ as h}from"./InputField.vue_vue_type_script_setup_true_lang.bf009e7b.js";import{_ as se,a as te,b as de}from"./NameField.vue_vue_type_script_setup_true_lang.65c3c91c.js";import{b as E}from"./route-block.011d1056.js";const ue={flex:"","justify-center":"","items-center":""},re=F({__name:"RealNameField",props:{fieldDomain:null,modelValue:null},emits:["realNameValidationChanged","realNameSubmission","update:modelValue"],setup(m,{emit:d}){const f=m,n=l(""),p=g(()=>(console.log(n.length),n.value.length>2&&n.value.split(" ").filter(s=>s).length>1?(console.log("Valid realName!"),"OK"):(console.log("Invalid realName! Too short."),"NOK")));return I(p,async(s,a)=>{console.log("Watching..."),console.log(a),console.log(s),d("realNameValidationChanged",s)}),I(n,async(s,a)=>{console.log("Watching realNames..."),d("update:modelValue",s)}),(s,a)=>{const t=h;return R(),D("div",ue,[r(t,{"m-1":"","field-name":"realName","field-domain":f.fieldDomain,"field-type":"text","field-icon":"i-carbon-user","field-status":v(p),modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=c=>n.value=c),onFocusout:a[1]||(a[1]=c=>d("realNameSubmission")),onInputSubmission:a[2]||(a[2]=c=>d("realNameSubmission"))},null,8,["field-domain","field-status","modelValue"])])}}}),me={flex:"","justify-center":"","items-center":""},fe=F({__name:"IbanField",props:{fieldDomain:null,modelValue:null},emits:["ibanValidationChanged","ibanSubmission","update:modelValue"],setup(m,{emit:d}){const f=m,n=l(""),p=/^[A-Z]{2}(?:[ ]?[0-9]){18,20}$/,s=g(()=>(console.log("validate iban, put it green if ok, red if incorrect"),n.value.match(p)?(console.log("Valid iban address!"),"OK"):(console.log("Invalid iban address!"),"NOK")));return I(s,async(a,t)=>{d("ibanValidationChanged",a)}),I(n,async(a,t)=>{console.log("Watching ibans..."),d("update:modelValue",a)}),(a,t)=>{const c=h;return R(),D("div",me,[r(c,{"m-1":"","field-name":"iban","field-domain":f.fieldDomain,"field-type":"text","field-size":80,"field-icon":"i-mdi-bank-outline","field-status":v(s),modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=b=>n.value=b),onFocusout:t[1]||(t[1]=b=>d("ibanSubmission")),onInputSubmission:t[2]||(t[2]=b=>d("ibanSubmission"))},null,8,["field-domain","field-status","modelValue"])])}}}),x=m=>(ne("data-v-da01767e"),m=m(),le(),m),ce={flex:"","flex-col":"","h-full":"","justify-center":"","items-center":""},pe={flex:"","flex-col":"","justify-center":"","items-center":""},ve=x(()=>i("div",{"i-carbon-caret-sort-down":""},null,-1)),be={flex:"","flex-col":"","justify-center":"","items-center":""},ge=x(()=>i("div",{w40:""},[i("img",{src:"https://avatars.dicebear.com/api/avataaars/alexvdvfsvdvdscsdsvsdcs.svg"})],-1)),_e=["disabled"],Ve={"flex-col":"","justify-center":""},Ne=x(()=>i("div",{"i-carbon-caret-sort-down":""},null,-1)),Ie={"flex-col":"","justify-center":""},Se=["disabled"],xe=x(()=>i("p",{"text-4xl":""},"32",-1)),A=F({__name:"profile",setup(m){const d=ae();X();const f=l(""),n=l("INITIAL"),p=l(""),s=l("INITIAL"),a=l(""),t=l("INITIAL"),c=l(),b=l("INITIAL"),j=l(""),_=l("INITIAL"),y=l(!0),$=l(!0),w=l(!1),V=l(!1);l(null);const C=l(null);function U(){V.value&&n.value=="OK"&&_.value=="OK"&&C.value.focus()}function B(){V.value&&n.value=="OK"&&_.value=="OK"&&C.value.focus()}g(()=>!V.value&&n.value=="OK"&&b.value=="OK"&&_.value=="OK");const T=g(()=>V.value&&n.value=="OK"&&_.value=="OK"),L=g(()=>s.value=="OK"&&t.value=="OK");I(f,async(u,e)=>{n.value!="OK"?(console.log("Email not validated yet"),V.value=!1):console.log("Does user already exist?")}),g(()=>"~@"+f.value);function M(){console.log("Executing refund"),w.value=!0}function P(){console.log("Dismissing Confirmation modal"),w.value=!1,d.push("/")}const{t:k}=Y();return(u,e)=>{const W=se,z=te,Z=de,q=fe,G=re,H=oe,J=Q;return R(),D(ee,null,[i("div",ce,[i("div",pe,[i("div",{"text-3xl":"","m-2":"","animate-pulse":"","animate-duration-5s":"",onClick:e[0]||(e[0]=o=>$.value=!$.value),flex:"","flex-row":"","justify-center":"",anim:""},[S(N(u.$t("profile.title"))+" ",1),ve]),K(i("div",be,[ge,r(W,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=o=>c.value=o),"field-domain":"signup",onNameValidationChanged:e[2]||(e[2]=o=>{b.value=o}),onNameSubmission:u.nameSubmitted},null,8,["modelValue","onNameSubmission"]),r(z,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),"field-domain":"signup",onEmailValidationChanged:e[4]||(e[4]=o=>{n.value=o}),onEmailSubmission:U},null,8,["modelValue"]),r(Z,{modelValue:j.value,"onUpdate:modelValue":e[5]||(e[5]=o=>j.value=o),"field-domain":"signup",onPasswordValidationChanged:e[6]||(e[6]=o=>{_.value=o}),onPasswordSubmission:B},null,8,["modelValue"]),i("div",null,[i("button",{ref_key:"signinButton",ref:C,btn:"","m-3":"","p-2":"","p-x-4":"","text-lg":"",border:"rounded-20",disabled:!v(T),onClick:e[7]||(e[7]=(...o)=>u.signin&&u.signin(...o))},N(v(k)("profile.save")),9,_e)])],512),[[O,$.value]])]),i("div",Ve,[i("div",{"text-3xl":"","m-2":"","animate-pulse":"","animate-duration-5s":"",onClick:e[8]||(e[8]=o=>y.value=!y.value),flex:"","flex-row":"","justify-center":"",anim:""},[S(N(u.$t("profile.refund"))+" ",1),Ne]),K(i("div",Ie,[r(q,{modelValue:p.value,"onUpdate:modelValue":e[9]||(e[9]=o=>p.value=o),"field-domain":"profile",onIbanValidationChanged:e[10]||(e[10]=o=>{s.value=o}),onIbanSubmission:u.ibanSubmitted},null,8,["modelValue","onIbanSubmission"]),r(G,{modelValue:a.value,"onUpdate:modelValue":e[11]||(e[11]=o=>a.value=o),"field-domain":"profile",onRealNameValidationChanged:e[12]||(e[12]=o=>{t.value=o}),onRealNameSubmission:u.realNameSubmitted},null,8,["modelValue","onRealNameSubmission"])],512),[[O,y.value]]),i("div",null,[i("button",{ref:"refundButton",btn:"","m-6":"","p-4":"","text-lg":"",class:"border-rounded-10 bg-#6622aa",disabled:!v(L),onClick:M},[S(N(v(k)("profile.refund-first-button"))+" ",1),xe,S(" "+N(u.$t("profile.refund-token-name")),1)],8,Se)])])]),r(H,{redirection:"/",caption:v(k)("profile.back"),"icon-name":"i-carbon:progress-bar-round",side:"right"},null,8,["caption"]),K(r(J,{onDismissModal:P,modalMessage:u.$t("profile.modal-message"),modalIcon:"i-carbon-checkmark",modalColor:"bg-green"},null,8,["modalMessage"]),[[O,w.value]])],64)}}});typeof E=="function"&&E(A);const Ke=ie(A,[["__scopeId","data-v-da01767e"]]);export{Ke as default};
